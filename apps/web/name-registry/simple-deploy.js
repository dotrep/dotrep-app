const { ethers } = require('ethers');
require('dotenv').config();

// NameRegistry contract bytecode and ABI
const CONTRACT_BYTECODE = "0x608060405234801561001057600080fd5b50611234806100206000396000f3fe608060405234801561001057600080fd5b50600436106100935760003560e01c80634976cfca116100665780634976cfca1461012d5780635e8a79051461014d5780638f3fab731461016d578063a035b1fe1461018d578063c41a360a146101ad57600080fd5b8062524e4814610098578063068bcd8d146100b85780632cf09b87146100d85780633b3b57de146100f8575b600080fd5b6100ab6100a6366004610e84565b6101cd565b6040516100af9190610f13565b60405180910390f35b6100cb6100c6366004610e84565b610236565b6040516100af9190610f4c565b6100eb6100e6366004610e84565b610282565b6040516100af9190610f51565b61011b610106366004610f73565b6001600160a01b03166000908152600260205260409020600401545b6040516100af9190610f8c565b61014061013b366004610e84565b610326565b6040516100af9190610f4c565b61016061015b366004610e84565b610372565b6040516100af9190610f51565b61018061017b366004610e84565b610416565b6040516100af9190610f4c565b61019a6000545b6040516100af9190610f8c565b6101c06101bb366004610e84565b610462565b6040516100af9190610f4c565b600081815260036020526040812054600160a01b900460ff16151591905080610204576040516330a6f05d60e21b815260040160405180910390fd5b6001820154600160a01b900460ff161561023057604051630f8dc50760e01b815260040160405180910390fd5b50919050565b600081815260036020526040812054600160a01b900460ff16151591905080610272576040516330a6f05d60e21b815260040160405180910390fd5b506001810154600160a01b900460ff165b919050565b60008181526003602052604081205481906001600160a01b0316806102ba576040516330a6f05d60e21b815260040160405180910390fd5b5080546001600160a01b031673555f000000000000000000000000000000000000000014156102ee576102ec61079e565b505b80546001600160a01b031673555f0000000000000000000000000000000000000000141561031e57610323565b61032361079e565b915090565b600081815260036020526040812054600160a01b900460ff1615159150806103665760405163e5d0a8e760e01b8152600401815260200160405180910390fd5b506001810154600160a01b900460ff165b919050565b600081815260036020526040812054600160a01b900460ff16151591505080156103b2576040516362a6883b60e11b8152600401815260200160405180910390fd5b60008281526003602052604081208054600160a01b60ff60a01b1916600160a01b1790819055906103e5906001906107c2565b90508083600084815260200190815260200160002060010160006101000a81548160ff021916908360ff160217905550600084815260036020526040902060010180546001600160a01b0319166001600160a01b0387161790555b50919050565b600081815260036020526040812054600160a01b900460ff1615159150806104565760405163e5d0a8e760e01b8152600401815260200160405180910390fd5b506001810154600160a01b900460ff165b919050565b600081815260036020526040812054600160a01b900460ff16151591508015610498576040516362a6883b60e11b8152600401815260200160405180910390fd5b6001830154600160a01b900460ff16156104c457604051630f8dc50760e01b815260040160405180910390fd5b600083815260036020526040902060010180546001600160a01b0319166001600160a01b0386161790556001840154600160a01b900460ff161561051957604051630f8dc50760e01b815260040160405180910390fd5b6001840154600160a01b900460ff1615610545576040516324c7bf7760e01b815260040160405180910390fd5b600084815260036020526040902060010180546001600160a01b0319166001600160a01b0387161790556001850154600160a01b900460ff1615610599576040516324c7bf7760e01b815260040160405180910390fd5b600185810180546001600160a01b0316600090815260026020526040902060010185905560010180546001600160a01b0319166001600160a01b03881617905560008581526003602052604090208054600160a01b60ff60a01b19909116600160a01b1790556001860154600160a01b900460ff16156106285760405163c47f002760e01b815260040160405180910390fd5b600186810180546001600160a01b031660009081526002602052604090206001018690556001810180546001600160a01b0319166001600160a01b0389161790556000868152600360205260409020805460ff60a01b1916600160a01b179055600187810154600160a01b900460ff16156106b3576040516324c7bf7760e01b815260040160405180910390fd5b600187810180546001600160a01b031660009081526002602052604090206001018790556001810180546001600160a01b0319166001600160a01b038a161790556000878152600360205260409020805460ff60a01b1916600160a01b179055600188810154600160a01b900460ff161561073e576040516324c7bf7760e01b815260040160405180910390fd5b600188810180546001600160a01b031660009081526002602052604090206001018890556001810180546001600160a01b0319166001600160a01b038b161790556000888152600360205260409020805460ff60a01b1916600160a01b17905550505050505050565b6040516001600160a01b03821681527f90890809c654f11d6e72a28fa60149770a0d11ec6c92319d6ceb2bb0a4ea1a15906020015b60405180910390a150565b60006001600160a01b038216610283816107e3565b5090565b919050565b6000816107f0565b80356001600160a01b038116811461028357600080fd5b600060208284031215610e9657600080fd5b610e9f826107ed565b9392505050565b60005b83811015610ec1578181015183820152602001610ea9565b50506000910152565b60008151808452610ee2816020860160208601610ea6565b601f01601f19169290920160200192915050565b6020815260006000602083018351806020850152610f1b818460408701610ea6565b601f01601f1916919091016040019392505050565b8015158114610f3e57600080fd5b60008115159050919050565b602081526000610e9f602083018461062f565b60208101610283828461063c565b60208101610283828461063a565b60008060408385031215610f8f57600080fd5b610f9883610ed7565b9150610fa660208401610ed7565b90509250929050565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff81118282101715610fee57610fee610faf565b604052919050565b600067ffffffffffffffff82111561101057611010610faf565b5060051b60200190565b600082601f83011261102b57600080fd5b813567ffffffffffffffff81111561104557611045610faf565b61105860201f19601f1984011601610fc5565b81815284602083860101111561106d57600080fd5b816020850160208301376000918101602001919091529392505050565b600082601f83011261109b57600080fd5b81356020610bb06110ab83610ff6565b610fc5565b82815260059290921b840181019181810190868411156110ca57600080fd5b8286015b848110156110e55780358352918301918301610ce">